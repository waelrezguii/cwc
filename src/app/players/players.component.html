<app-navbar></app-navbar>

<div class="container mt-4">
  <div class="row">
    <div class="col-md-12">
      <table class="table table-striped table-bordered">
        <thead class="thead-dark">
          <tr style="background-color: #031B49; color: #FFD000;">
            <th>Player</th>
            <th>Team</th>
            <th>Position</th>
            <th>Nation</th>
            <th *ngIf="isLoggedIn">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let player of players; trackBy: trackByPlayer" [formGroup]="playerForms[player.player]">
            <td>
              <span *ngIf="!playerForms[player.player].dirty">{{ player.player }}</span>
              <input *ngIf="playerForms[player.player].dirty" formControlName="player" class="form-control">
            </td>
            <td>
              <span *ngIf="!playerForms[player.player].dirty">{{ player.teams.teamname }}</span>
              <input *ngIf="playerForms[player.player].dirty" formControlName="teamname" class="form-control">
            </td>
            <td>
              <span *ngIf="!playerForms[player.player].dirty">{{ player.pos }}</span>
              <input *ngIf="playerForms[player.player].dirty" formControlName="pos" class="form-control">
            </td>
            <td>
              <span *ngIf="!playerForms[player.player].dirty">{{ player.nation }}</span>
              <input *ngIf="playerForms[player.player].dirty" formControlName="nation" class="form-control">
            </td>
            <td *ngIf="isLoggedIn">
              <button class="btn btn-primary" (click)="toggleEdit(player)">
                {{ playerForms[player.player].dirty ? 'Save' : 'Edit' }}
              </button>
              <button class="btn btn-danger" (click)="deletePlayer(player.player)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <button *ngIf="isLoggedIn" class="btn btn-success" (click)="addPlayer()">Add Player</button>
    </div>
  </div>
</div>
